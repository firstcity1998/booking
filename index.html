<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞</title>
  <h1 class="restaurant-name">Vyse</h1>
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>


  <style>
    .restaurant-name {
  font-size: 36px;
  font-weight: bold;
  text-align: center;
  margin-bottom: 12px;
  color: #facc15;
  text-shadow: 0 2px 10px rgba(0,0,0,0.6);
}

    body {
      font-family: 'Prompt', sans-serif;
      background: linear-gradient(to bottom, #2d004b, #0e0e0e);
      color: white;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      width: 100%;
      max-width: 400px;
      padding: 20px;
      box-sizing: border-box;
    }

    .stage {
      background: #b91c1c;
      text-align: center;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 16px;
    }

    .seat-map {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 10px;
      margin-bottom: 20px;
      position: relative;
    }

    .seat {
      background: #444;
      padding: 10px;
      border-radius: 6px;
      text-align: center;
      cursor: pointer;
    }

    .seat.selected {
      background: #facc15;
      color: black;
    }

    .seat.reserved {
      background: #9ca3af;
      cursor: not-allowed;
    }

    .bathroom-icon {
      position: absolute;
      top: 0;
      font-size: 16px;
    }

    .bathroom-left {
      left: -30px;
    }

    .bathroom-right {
      right: -30px;
    }

    .legend {
      display: flex;
      justify-content: space-around;
      font-size: 14px;
      margin-bottom: 10px;
    }

    .legend div {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .dot {
      width: 12px;
      height: 12px;
      border-radius: 3px;
    }

    .dot.available { background: #444; }
    .dot.selected { background: #facc15; }
    .dot.reserved { background: #9ca3af; }

    .summary {
      text-align: center;
      margin-bottom: 10px;
    }

    button {
      width: 100%;
      padding: 12px;
      background: #f59e0b;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      color: black;
      cursor: pointer;
    }

  </style>
</head>
<body>
  <div class="container">
    <div class="stage">‡πÄ‡∏ß‡∏ó‡∏µ</div>

    <div class="seat-map" id="seatMap">
      <div class="bathroom-icon bathroom-left">üöª</div>
      <div class="bathroom-icon bathroom-right">üöª</div>

      <!-- A1 - A5 -->
      <div class="seat" data-id="A1">A1</div>
      <div class="seat" data-id="A2">A2</div>
      <div class="seat reserved" data-id="A3">A3</div>
      <div class="seat" data-id="A4">A4</div>
      <div class="seat" data-id="A5">A5</div>

      <!-- B1 - B5 -->
      <div class="seat" data-id="B1">B1</div>
      <div class="seat" data-id="B2">B2</div>
      <div class="seat" data-id="B3">B3</div>
      <div class="seat reserved" data-id="B4">B4</div>
      <div class="seat" data-id="B5">B5</div>

      <!-- C1 - C5 -->
      <div class="seat" data-id="C1">C1</div>
      <div class="seat" data-id="C2">C2</div>
      <div class="seat" data-id="C3">C3</div>
      <div class="seat" data-id="C4">C4</div>
      <div class="seat" data-id="C5">C5</div>

      <!-- D1 - D5 -->
      <div class="seat" data-id="D1">D1</div>
      <div class="seat" data-id="D2">D2</div>
      <div class="seat" data-id="D3">D3</div>
      <div class="seat selected" data-id="D4">D4</div>
      <div class="seat" data-id="D5">D5</div>

      <!-- E1 - E5 -->
      <div class="seat" data-id="E1">E1</div>
      <div class="seat" data-id="E2">E2</div>
      <div class="seat" data-id="E3">E3</div>
      <div class="seat" data-id="E4">E4</div>
      <div class="seat" data-id="E5">E5</div>

      <!-- F1 - F5 -->
      <div class="seat" data-id="F1">F1</div>
      <div class="seat" data-id="F2">F2</div>
      <div class="seat" data-id="F3">F3</div>
      <div class="seat" data-id="F4">F4</div>
      <div class="seat" data-id="F5">F5</div>
    </div>

    <div class="legend">
      <div><div class="dot available"></div> ‡∏ß‡πà‡∏≤‡∏á</div>
      <div><div class="dot reserved"></div> ‡∏à‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß</div>
      <div><div class="dot selected"></div> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß</div>
    </div>

    <div class="summary">
      ‡∏£‡∏ß‡∏°: <span id="total">50</span> ‡∏ö‡∏≤‡∏ó
    </div>

    <button onclick="bookSeats()">‡∏à‡∏≠‡∏á‡πÄ‡∏•‡∏¢</button>
  </div>

  <script>
  function bookSeats() {
  if (selected.size === 0) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡∏Å‡πà‡∏≠‡∏ô");
    return;
  }

  const bookedTables = [...selected];
  const url = "https://script.google.com/macros/s/AKfycbyPBchWeOWEOF71695gujPcAQlpZsOlQdSQ4CVFtL0JqklVLZUdaCelOUbQmL7EZgeFPQ/exec"; // üîÅ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô URL Web App ‡∏à‡∏≤‡∏Å GAS

  fetch(url, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      userId: userId,
      tables: bookedTables,
      status: "Booked"
    })
  })
  .then(res => res.json())
  .then(data => {
    console.log("‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≠‡∏á‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à:", data);
    if (liff.isInClient()) {
      liff.sendMessages([
        {
          type: "flex",
          altText: "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞",
          contents: {
            type: "bubble",
            body: {
              type: "box",
              layout: "vertical",
              contents: [
                {
                  type: "text",
                  text: "‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á",
                  weight: "bold",
                  size: "lg",
                  margin: "none"
                },
                {
                  type: "text",
                  text: `‡πÇ‡∏ï‡πä‡∏∞: ${bookedTables.join(", ")}`,
                  margin: "md"
                },
                {
                  type: "text",
                  text: `‡∏£‡∏ß‡∏° ${bookedTables.length * 50} ‡∏ö‡∏≤‡∏ó`,
                  margin: "sm"
                }
              ]
            }
          }
        }
      ])
      .then(() => liff.closeWindow())
      .catch(err => console.error("‚ùå Flex ‡∏™‡πà‡∏á‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", err));
    } else {
      alert("‚úÖ ‡∏à‡∏≠‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÇ‡∏ï‡πä‡∏∞: " + bookedTables.join(", "));
    }
  })
  .catch(err => {
    console.error("‚ùå ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:", err);
    alert("‚ùå ‡∏à‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà");
  });
}


  let userId = null;

  liff.init({ liffId: "2007619597-pL1yYoj3" }) // üîÅ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô LIFF ID ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    .then(() => {
      if (!liff.isLoggedIn()) {
        liff.login();
      } else {
        liff.getProfile().then(profile => {
          userId = profile.userId;
          console.log("üîê userId:", userId);
        });
      }
    })
    .catch(err => {
      console.error("‚ùå LIFF Init Error:", err);
    });
</script>

</body>
</html>
