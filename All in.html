<!DOCTYPE html>
<html lang="th">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>‡∏ú‡∏±‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏£‡πâ‡∏≤‡∏ô All In</title>
  <style>
    @media screen and (max-width: 768px) {
  .layout {
    transform: scale(0.8);
    transform-origin: top center;
  }
}
    body {
  margin: 0;
  font-family: 'Arial', sans-serif;
  background: radial-gradient(circle at top left, #6a0dad, #2c003e);
  background-repeat: no-repeat;
  background-attachment: fixed;
  overflow-x: ; /* <== ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ scroll ‡πÅ‡∏ô‡∏ß‡∏ô‡∏≠‡∏ô‡πÑ‡∏î‡πâ */
  overflow-y: auto;
}

    .layout {
  position: relative;
  width: 900px;
  height: 650px;
  margin: 0 ;
  background: rgba(12, 12, 12, 0.05);
  border-radius: 16px;
}



    .stage {
      position: absolute;
      top: 20px;
      left: 50px;
      width: 250px;
      height: 100px;
      background: #ff5c5c;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 20px;
    }

    .table {
      position: absolute;
      width: 50px;
      height: 50px;
      background: black;
      color: white;
      font-weight: bold;
      font-size: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      clip-path: polygon(10% 0%, 90% 0%, 100% 10%, 100% 90%, 90% 100%, 10% 100%, 0% 90%, 0% 10%);
      cursor: pointer;
      transition: background 0.3s;
    }

    .table.selected {
      background-color: #2ecc71;
    }

    .door {
      position: absolute;
      width: 25px;
      height: 50px;
      border: 2px solid rgb(252, 248, 248);
    }

    .door::after {
      content: '';
      position: absolute;
      width: 5px;
      height: 5px;
      background: rgb(255, 255, 255);
      border-radius: 50%;
      top: 50%;
      left: 5px;
      transform: translateY(-50%);
    }

    .seat, .bar {
      position: absolute;
      background: white;
      border: 2px solid black;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      font-size: 14px;
      writing-mode: vertical-rl;
    }

    .seat {
      width: 40px;
      height: 200px;
    }

    .bar {
      width: 60px;
      height: 190px;
    }

    .bar-center {
      width: 150px;
      height: 60px;
      writing-mode: horizontal-tb;
    }

    /* ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏•‡∏≤‡∏á‡∏à‡∏≠‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô */
    .t1 { top: 30px; left: 530px; }
    .t2 { top: 90px; left: 530px; }

    .t3 { top: 160px; left: 470px; }
    .t4 { top: 220px; left: 470px; }
    .t5 { top: 280px; left: 470px; }
    .t6 { top: 340px; left: 470px; }

    .t7 { top: 160px; left: 50px; }
    .t8 { top: 220px; left: 50px; }
    .t9 { top: 280px; left: 50px; }
    .t10 { top: 340px; left: 50px; }
    .t11 { top: 400px; left: 50px; }

    .t12 { top: 500px; left: 40px; }
    .t13 { top: 560px; left: 40px; }

    .b1 { top: 460px; left: 250px; }
    .b2 { top: 510px; left: 250px; }
    .b3 { top: 560px; left: 250px; }
    .b4 { top: 610px; left: 250px; }

    .seat { top: 160px; left: 530px; }

    .bar-left   { top: 460px; left: 300px; }
    .bar-right  { top: 460px; left: 520px; }
    .bar-center { top: 460px; left: 365px; }

    .door-top-right { top: 20px; left: 480px; }
    .door-bottom-left { top: 620px; left: 50px; }

    #summary {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #f7f7f7;
      border-top: 1px solid #ccc;
      padding: 10px;
      font-size: 16px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1 style="
  position: fixed;
  top: 30px;
  left: 45%;
  
  font-size: 32px;
  color: white;
  z-index: 999;
  margin: 0;
">
  All In
</h1>
  
  <div class="layout">
    <div class="stage">STAGE</div>

    <!-- ‡πÇ‡∏ï‡πä‡∏∞ -->
    <div class="table t1" data-table="1">1</div>
    <div class="table t2" data-table="2">2</div>
    <div class="table t3" data-table="3">3</div>
    <div class="table t4" data-table="4">4</div>
    <div class="table t5" data-table="5">5</div>
    <div class="table t6" data-table="6">6</div>
    <div class="table t7" data-table="7">7</div>
    <div class="table t8" data-table="8">8</div>
    <div class="table t9" data-table="9">9</div>
    <div class="table t10" data-table="10">10</div>
    <div class="table t11" data-table="11">11</div>
    <div class="table t12" data-table="12">12</div>
    <div class="table t13" data-table="13">13</div>
    <div class="table b1" data-table="B1">B1</div>
    <div class="table b2" data-table="B2">B2</div>
    <div class="table b3" data-table="B3">B3</div>
    <div class="table b4" data-table="B4">B4</div>

    <!-- ‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° -->
    <div class="seat">seat</div>
    <div class="bar bar-left">Bar</div>
    <div class="bar bar-center">Bar</div>
    <div class="bar bar-right">Bar</div>
    <div class="door door-top-right"></div>
    <div class="door door-bottom-left"></div>
  </div>

  <div id="summary">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞</div>
<div style="text-align: center; margin: 20px;">
  <button id="confirmBtn" style="
  position: fixed;
  bottom: 50px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgb(253, 187, 7);
  color: white;
  padding: 12px 24px;
  font-size: 18px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  z-index: 999;
">
   ‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞
</button>
</div>

<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script>
  const pricePerTable = 50;
  const summary = document.getElementById('summary');
  const tables = document.querySelectorAll('.table');
  const confirmBtn = document.getElementById('confirmBtn');
  const selectedTables = new Set();
  let displayName = "‡∏Ñ‡∏∏‡∏ì";

  async function initLiff() {
    await liff.init({ liffId: "2007619597-pL1yYoj3" }); // ‚Üê ‡πÉ‡∏™‡πà LIFF ID ‡∏à‡∏£‡∏¥‡∏á‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    if (!liff.isLoggedIn()) {
      liff.login();
    } else {
      const profile = await liff.getProfile();
      displayName = profile.displayName || "‡∏Ñ‡∏∏‡∏ì";
    }
  }

  initLiff();

  tables.forEach(table => {
    const tableId = table.getAttribute('data-table');
    if (tableId && tableId !== 'STAGE') {
      table.addEventListener('click', () => {
        if (selectedTables.has(tableId)) {
          selectedTables.delete(tableId);
          table.classList.remove('selected');
        } else {
          selectedTables.add(tableId);
          table.classList.add('selected');
        }
        updateSummary();
      });
    }
  });

  function updateSummary() {
    if (selectedTables.size === 0) {
      summary.textContent = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞';
      return;
    }

    const tableList = Array.from(selectedTables).sort((a, b) => a.localeCompare(b));
    const total = tableList.length * pricePerTable;
    summary.textContent = `‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${tableList.join(', ')} | ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: ${total} ‡∏ö‡∏≤‡∏ó`;
  }

  confirmBtn.addEventListener('click', async () => {
    const tableList = Array.from(selectedTables).sort((a, b) => a.localeCompare(b));
    const total = tableList.length * pricePerTable;

    if (tableList.length === 0) {
      alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏≠‡∏á");
      return;
    }

    const flexMessage = {
      type: "flex",
      altText: "üìå ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞",
      contents: {
        type: "bubble",
        header: {
          type: "box",
          layout: "vertical",
          contents: [{
            type: "text",
            text: "üìå ‡∏£‡πâ‡∏≤‡∏ô All In",
            weight: "bold",
            size: "lg",
            color: "#a855f7"
          }]
        },
        body: {
          type: "box",
          layout: "vertical",
          spacing: "sm",
          contents: [
            {
              type: "text",
              text: `${displayName} ‡πÑ‡∏î‡πâ‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞`,
              weight: "bold",
              size: "md"
            },
            {
              type: "text",
              text: `‡πÇ‡∏ï‡πä‡∏∞: ${tableList.join(', ')}`,
              size: "sm",
              wrap: true
            },
            {
              type: "text",
              text: `‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${total} ‡∏ö‡∏≤‡∏ó`,
              size: "sm",
              weight: "bold",
              color: "#10b981"
            }
          ]
        }
      }
    };

    try {
      await liff.sendMessages([flexMessage]);
      alert("‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
      liff.closeWindow();
    } catch (err) {
      console.error("Send message error:", err);
      alert("‚ùå ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    }
  });
</script>


</body>
</html>
